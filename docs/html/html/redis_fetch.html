<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Redis Module - BinPan 0.5.1 documentation</title>
    <link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Statistical Tests and Tools" href="stat_tests.html" /><link rel="prev" title="Requests Module" href="quest.html" />
  <script>
    const isDarkTheme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const sessionTheme = sessionStorage['_theme']
    if (sessionTheme) {
      document.documentElement.classList.add(sessionTheme)
    } else if (isDarkTheme) {
      document.documentElement.classList.add('dark')
    }
  </script><link rel="stylesheet" type="text/css" href="_static/pygments.css?v=aecf457f" />
    <link rel="stylesheet" type="text/css" href="_static/shibuya.css?v=2981b36d" />
    <link rel="stylesheet" type="text/css" href="_static/style.css?v=1e48dca6" />
    <link media="print" rel="stylesheet" type="text/css" href="_static/print.css?v=ee381b95" />
    <style>
:root {
  --sy-f-sys:-apple-system, BlinkMacSystemFont, Segoe UI, Oxygen, Ubuntu, Droid Sans, Helvetica Neue;--sy-f-cjk:PingFang SC, Hiragino Sans GB, Droid Sans Fallback, Microsoft YaHei;--sy-f-heading:var(--sy-f-sys), var(--sy-f-cjk), sans-serif;--sy-f-text:var(--sy-f-sys), var(--sy-f-cjk), sans-serif;--sy-f-mono:Menlo, Monaco, Consolas, "Courier New", monospace;--sy-c-divider:rgba(var(--sy-rc-text), 0.1);--sy-c-divider-weak:rgba(var(--sy-rc-text), 0.05);--sy-c-border:rgba(var(--sy-rc-text), 0.14);--sy-s-banner-height:0rem;--sy-s-navbar-height:56px;--sy-s-offset-top:calc(var(--sy-s-navbar-height) + var(--sy-s-banner-height));--sy-c-link:rgb(var(--sy-rc-theme));--sy-c-link-weak:rgba(var(--sy-rc-theme), 0.86);
  --sy-rc-theme:143, 118, 214;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
}
@media (prefers-color-scheme: light) {
  :root {
    --sy-rc-theme:143, 118, 214;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
  }
}
@media (prefers-color-scheme: dark) {
  :root {
    --sy-rc-theme:143, 118, 214;--sy-rc-bg:18, 18, 18;--sy-rc-invert:255, 255, 255;--sy-rc-text:255, 255, 255;--sy-c-bg:#121212;--sy-c-bg-weak:#212833;--sy-c-text:#cedbea;--sy-c-text-weak:#77889f;--sy-c-heading:#ebf0f4;--sy-c-bold:#ebf0f4;--sy-c-foot-text:#eee;--sy-c-foot-bg:#000;--sy-c-foot-divider:#000;
  }
}
html.light {
  --sy-rc-theme:143, 118, 214;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
}
html.dark {
  --sy-rc-theme:143, 118, 214;--sy-rc-bg:18, 18, 18;--sy-rc-invert:255, 255, 255;--sy-rc-text:255, 255, 255;--sy-c-bg:#121212;--sy-c-bg-weak:#212833;--sy-c-text:#cedbea;--sy-c-text-weak:#77889f;--sy-c-heading:#ebf0f4;--sy-c-bold:#ebf0f4;--sy-c-foot-text:#eee;--sy-c-foot-bg:#000;--sy-c-foot-divider:#000;
}
</style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-heading: Inter, var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Redis Module"/>
<meta name="twitter:card" content="summary"/></head>
<body><div class="document"><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand mr-4" href="index.html">
      
      
      <strong>BinPan</strong>
    </a>
    <div class="sy-head-links" id="NavLinks">
      <nav class="sy-head-nav"></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form>
        
        
        <div class="sy-head-social flex items-center">
        </div>
      </div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden">
      <button class="js-theme theme-switch flex items-center" data-aria-light="Switch to dark mode" data-aria-dark="Switch to light mode">
        <i class="i-icon theme-icon"></i>
      </button>
      <button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="NavLinks" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="binpan.html">BinPan Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="aggregations.html">Aggregations Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">Exceptions Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="exchange.html">Exchange Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">Files Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="indicators.html">Indicators Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="influx_manager.html">Influx Manager Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="market.html">Market Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages.html">Messages Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="postgresql.html">PostgreSQL Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="quest.html">Requests Module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Redis Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="stat_tests.html">Statistical Tests and Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="starters.html">Starters Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="strategies.html">Strategies Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="tags.html">Tags &amp; Backtesting Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="time_helper.html">Time Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="wallet.html">Wallet Module</a></li>
</ul>

        </div>
      </div>
      
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-icon close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4">
  <div class="localtoc">
    <h3>On this page</h3>
    <ul>
<li><a class="reference internal" href="#module-handlers.redis_fetch">Module Info</a><ul>
<li><a class="reference internal" href="#handlers.redis_fetch.redis_client"><code class="docutils literal notranslate"><span class="pre">redis_client()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.manage_sentinel"><code class="docutils literal notranslate"><span class="pre">manage_sentinel()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.manage_redis"><code class="docutils literal notranslate"><span class="pre">manage_redis()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.redis_klines_parser"><code class="docutils literal notranslate"><span class="pre">redis_klines_parser()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.orderbook_value_to_dataframe"><code class="docutils literal notranslate"><span class="pre">orderbook_value_to_dataframe()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.redis_extract_orderbook_value_quantities"><code class="docutils literal notranslate"><span class="pre">redis_extract_orderbook_value_quantities()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.fetch_keys"><code class="docutils literal notranslate"><span class="pre">fetch_keys()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.klines_continuity"><code class="docutils literal notranslate"><span class="pre">klines_continuity()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.klines_ohlc_to_numpy"><code class="docutils literal notranslate"><span class="pre">klines_ohlc_to_numpy()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.redis_baliza"><code class="docutils literal notranslate"><span class="pre">redis_baliza()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.decode_zset_data"><code class="docutils literal notranslate"><span class="pre">decode_zset_data()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.push_to_ordered_set"><code class="docutils literal notranslate"><span class="pre">push_to_ordered_set()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.fetch_zset_range"><code class="docutils literal notranslate"><span class="pre">fetch_zset_range()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.fetch_zset_timestamps"><code class="docutils literal notranslate"><span class="pre">fetch_zset_timestamps()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.fetch_set_and_parse"><code class="docutils literal notranslate"><span class="pre">fetch_set_and_parse()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.zset_length_between_scores"><code class="docutils literal notranslate"><span class="pre">zset_length_between_scores()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.zset_length"><code class="docutils literal notranslate"><span class="pre">zset_length()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.push_line_to_redis"><code class="docutils literal notranslate"><span class="pre">push_line_to_redis()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.fetch_list"><code class="docutils literal notranslate"><span class="pre">fetch_list()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.fetch_data_in_list"><code class="docutils literal notranslate"><span class="pre">fetch_data_in_list()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.insert_line_before_index_in_list"><code class="docutils literal notranslate"><span class="pre">insert_line_before_index_in_list()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.find_row_index_in_redis_key"><code class="docutils literal notranslate"><span class="pre">find_row_index_in_redis_key()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.fetch_list_filter_query"><code class="docutils literal notranslate"><span class="pre">fetch_list_filter_query()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.execute_pipeline"><code class="docutils literal notranslate"><span class="pre">execute_pipeline()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.flush_pipeline"><code class="docutils literal notranslate"><span class="pre">flush_pipeline()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.pipe_buffer_ordered_set"><code class="docutils literal notranslate"><span class="pre">pipe_buffer_ordered_set()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.pipe_zset_range"><code class="docutils literal notranslate"><span class="pre">pipe_zset_range()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.pipe_zset_timestamps"><code class="docutils literal notranslate"><span class="pre">pipe_zset_timestamps()</span></code></a></li>
<li><a class="reference internal" href="#handlers.redis_fetch.pipe_time_interval_bulk_ohlc_data"><code class="docutils literal notranslate"><span class="pre">pipe_time_interval_bulk_ohlc_data()</span></code></a></li>
</ul>
</li>
</ul>

  </div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div>
    </div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
    <div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-icon menu"></i>
      </button>
    </div>
    <ul class="flex-1">
      
      
      <li><a href="index.html">BinPan</a><span>/</span></li>
      
      <li><strong>Redis Module</strong></li>
      
      
    </ul>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-icon outdent"></i>
      </button>
    </div>
  </div>
</div>
    <div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="redis-module">
<h1>Redis Module<a class="headerlink" href="#redis-module" title="Link to this heading">¶</a></h1>
<p>This module can manage Redis database data from Binance API with its original Binance format.</p>
<p>Redis recommended type is <strong>Sorted Sets</strong>. Check: <a class="reference external" href="https://redis.io/docs/manual/data-types/">https://redis.io/docs/manual/data-types/</a></p>
<p>Each element is expected to be indexed or <strong>scored</strong> (Redis call index number “score”).</p>
<p>Example of an expected data response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">from</span> <span class="nn">binpan</span> <span class="kn">import</span> <span class="n">binpan</span>
</span><span id="1-2"><span class="kn">from</span> <span class="nn">handlers</span> <span class="kn">import</span> <span class="n">redis_fetch</span>
</span><span id="1-3"><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span>
</span><span id="1-4">
</span><span id="1-5"><span class="n">redis_client</span> <span class="o">=</span> <span class="n">binpan</span><span class="o">.</span><span class="n">redis_client</span><span class="p">(</span><span class="n">ip</span><span class="o">=</span><span class="s1">&#39;192.168.69.43&#39;</span><span class="p">)</span>
</span><span id="1-6">
</span><span id="1-7"><span class="n">keys</span> <span class="o">=</span> <span class="n">redis_fetch</span><span class="o">.</span><span class="n">fetch_keys</span><span class="p">(</span><span class="n">redisClient</span><span class="o">=</span><span class="n">redis_client</span><span class="p">)</span>
</span><span id="1-8"><span class="n">stream</span> <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
</span><span id="1-9">
</span><span id="1-10"><span class="nb">print</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</span><span id="1-11">
</span><span id="1-12"><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;galabusd@kline_5m&#39;</span>
</span><span id="1-13">
</span><span id="1-14"><span class="n">redis_fetch</span><span class="o">.</span><span class="n">fetch_zset_range</span><span class="p">(</span><span class="n">redisClient</span><span class="o">=</span><span class="n">redis_client</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span> <span class="n">start_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end_index</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">with_scores</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="1-15">
</span><span id="1-16"><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="s1">&#39;{&quot;t&quot;: 1658765700000, &quot;o&quot;: &quot;0.05011000&quot;, &quot;h&quot;: &quot;0.05017000&quot;, &quot;l&quot;: &quot;0.05004000&quot;, &quot;c&quot;: &quot;0.05006000&quot;, &quot;v&quot;: &quot;345741.00000000&quot;, &quot;T&quot;: 1658765999999, &quot;q&quot;: &quot;17315.68030000&quot;, &quot;n&quot;: 87, &quot;V&quot;: &quot;84642.00000000&quot;, &quot;Q&quot;: &quot;4239.51131000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-17">     <span class="s1">&#39;{&quot;t&quot;: 1658766000000, &quot;o&quot;: &quot;0.05005000&quot;, &quot;h&quot;: &quot;0.05010000&quot;, &quot;l&quot;: &quot;0.04999000&quot;, &quot;c&quot;: &quot;0.04999000&quot;, &quot;v&quot;: &quot;448270.00000000&quot;, &quot;T&quot;: 1658766299999, &quot;q&quot;: &quot;22422.46695000&quot;, &quot;n&quot;: 68, &quot;V&quot;: &quot;132503.00000000&quot;, &quot;Q&quot;: &quot;6628.86299000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-18">     <span class="s1">&#39;{&quot;t&quot;: 1658766300000, &quot;o&quot;: &quot;0.04998000&quot;, &quot;h&quot;: &quot;0.05004000&quot;, &quot;l&quot;: &quot;0.04995000&quot;, &quot;c&quot;: &quot;0.05000000&quot;, &quot;v&quot;: &quot;268084.00000000&quot;, &quot;T&quot;: 1658766599999, &quot;q&quot;: &quot;13396.55626000&quot;, &quot;n&quot;: 57, &quot;V&quot;: &quot;94341.00000000&quot;, &quot;Q&quot;: &quot;4715.14561000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-19">     <span class="s1">&#39;{&quot;t&quot;: 1658766600000, &quot;o&quot;: &quot;0.04998000&quot;, &quot;h&quot;: &quot;0.05010000&quot;, &quot;l&quot;: &quot;0.04996000&quot;, &quot;c&quot;: &quot;0.05002000&quot;, &quot;v&quot;: &quot;402674.00000000&quot;, &quot;T&quot;: 1658766899999, &quot;q&quot;: &quot;20162.97689000&quot;, &quot;n&quot;: 68, &quot;V&quot;: &quot;154895.00000000&quot;, &quot;Q&quot;: &quot;7753.09416000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">]</span>
</span></pre></div>
</div>
<section id="module-handlers.redis_fetch">
<span id="module-info"></span><h2>Module Info<a class="headerlink" href="#module-handlers.redis_fetch" title="Link to this heading">¶</a></h2>
<p><strong>Functions:</strong></p>
<div class="table-wrapper autosummary longtable docutils container">
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.redis_client" title="handlers.redis_fetch.redis_client"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redis_client</span></code></a>([ip, port, db, decode_responses])</p></td>
<td><p>A redis consumer client creator for the Redis module.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.manage_sentinel" title="handlers.redis_fetch.manage_sentinel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_sentinel</span></code></a>(sentinel_redis)</p></td>
<td><p>Manage the Redis Sentinel configuration and return a StrictRedis instance.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.manage_redis" title="handlers.redis_fetch.manage_redis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_redis</span></code></a>(redis_args)</p></td>
<td><p>Manage the Redis configuration and return a StrictRedis instance or None.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.redis_klines_parser" title="handlers.redis_fetch.redis_klines_parser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redis_klines_parser</span></code></a>(json_list, symbol, ...)</p></td>
<td><p>Parses redis klines list to a BinPan Dataframe.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.orderbook_value_to_dataframe" title="handlers.redis_fetch.orderbook_value_to_dataframe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">orderbook_value_to_dataframe</span></code></a>(data)</p></td>
<td><p>Build a Dataframe with redis data from orderbook_values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.redis_extract_orderbook_value_quantities" title="handlers.redis_fetch.redis_extract_orderbook_value_quantities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redis_extract_orderbook_value_quantities</span></code></a>(data)</p></td>
<td><p>Prepares data for plotting.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.fetch_keys" title="handlers.redis_fetch.fetch_keys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch_keys</span></code></a>(redisClient[, ...])</p></td>
<td><p>Fetch all keys in redis database.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.klines_continuity" title="handlers.redis_fetch.klines_continuity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">klines_continuity</span></code></a>(klines, tick_interval)</p></td>
<td><p>Check klines missing.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.klines_ohlc_to_numpy" title="handlers.redis_fetch.klines_ohlc_to_numpy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">klines_ohlc_to_numpy</span></code></a>(klines)</p></td>
<td><p>Extract open, high, low and close numpy arrays from raw klines (list of json strings).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.redis_baliza" title="handlers.redis_fetch.redis_baliza"><code class="xref py py-obj docutils literal notranslate"><span class="pre">redis_baliza</span></code></a>(redis_client, symbol, tick_interval)</p></td>
<td><p>Returns when Redis data available waiting until the next open timestamp appears.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.decode_zset_data" title="handlers.redis_fetch.decode_zset_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">decode_zset_data</span></code></a>(data_list)</p></td>
<td><p>Checks type and if bytes type, convert to dict.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.push_to_ordered_set" title="handlers.redis_fetch.push_to_ordered_set"><code class="xref py py-obj docutils literal notranslate"><span class="pre">push_to_ordered_set</span></code></a>(redisClient, key, mapping)</p></td>
<td><p>Pushes elements to the ordered set with a score as index.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.fetch_zset_range" title="handlers.redis_fetch.fetch_zset_range"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch_zset_range</span></code></a>(redisClient[, key, symbol, ...])</p></td>
<td><p>Fetch a redis ordered set by its key name and start end indexes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.fetch_zset_timestamps" title="handlers.redis_fetch.fetch_zset_timestamps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch_zset_timestamps</span></code></a>(redisClient, key, ...)</p></td>
<td><p>Fetch a redis ordered set by its key name and start end scores.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.fetch_set_and_parse" title="handlers.redis_fetch.fetch_set_and_parse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch_set_and_parse</span></code></a>(redisClient, key)</p></td>
<td><p>Fetch a websocket channel from redis and parses to a BinPan dataframe.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.zset_length_between_scores" title="handlers.redis_fetch.zset_length_between_scores"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zset_length_between_scores</span></code></a>(redisClient, ...)</p></td>
<td><p>Returns count of elements between start score and end score (including elements with score equal to min or max).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.zset_length" title="handlers.redis_fetch.zset_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">zset_length</span></code></a>(redisClient, name)</p></td>
<td><p>Returns count of elements in a set.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.push_line_to_redis" title="handlers.redis_fetch.push_line_to_redis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">push_line_to_redis</span></code></a>(redisClient, key, data)</p></td>
<td><p>Pushes another line to the end of a list key in redis database.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.fetch_list" title="handlers.redis_fetch.fetch_list"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch_list</span></code></a>(redisClient, key[, start_index, ...])</p></td>
<td><p>Fetch list entries in a redis list key from start index to end.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.fetch_data_in_list" title="handlers.redis_fetch.fetch_data_in_list"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch_data_in_list</span></code></a>(redisClient, key[, ...])</p></td>
<td><p>Fetch data from redis for a given key.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.insert_line_before_index_in_list" title="handlers.redis_fetch.insert_line_before_index_in_list"><code class="xref py py-obj docutils literal notranslate"><span class="pre">insert_line_before_index_in_list</span></code></a>(...)</p></td>
<td><p>Inserts data before an existing string in a redis list.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.find_row_index_in_redis_key" title="handlers.redis_fetch.find_row_index_in_redis_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_row_index_in_redis_key</span></code></a>(redisClient, ...)</p></td>
<td><p>It founds in a redis stream the most accurate row with greater timestamp than the passed timestamp row and returns its index by iteration.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.fetch_list_filter_query" title="handlers.redis_fetch.fetch_list_filter_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch_list_filter_query</span></code></a>(redisClient[, ...])</p></td>
<td><p>Fetch from redis all keys for a time interval.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.execute_pipeline" title="handlers.redis_fetch.execute_pipeline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute_pipeline</span></code></a>(pipeline)</p></td>
<td><p>Executes a pipeline buffer.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.flush_pipeline" title="handlers.redis_fetch.flush_pipeline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flush_pipeline</span></code></a>(pipeline)</p></td>
<td><p>Flush pipeline buffered commands.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.pipe_buffer_ordered_set" title="handlers.redis_fetch.pipe_buffer_ordered_set"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pipe_buffer_ordered_set</span></code></a>(pipeline, key, mapping)</p></td>
<td><p>Fills a pipeline buffer to &quot;pipeline.execute()&quot; later with commands of pushes of elements to an ordered set with a score as index.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.pipe_zset_range" title="handlers.redis_fetch.pipe_zset_range"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pipe_zset_range</span></code></a>(pipeline, key[, ...])</p></td>
<td><p>Pipe a request for an ordered set by index for a redis existing key.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#handlers.redis_fetch.pipe_zset_timestamps" title="handlers.redis_fetch.pipe_zset_timestamps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pipe_zset_timestamps</span></code></a>(pipeline, key, ...[, ...])</p></td>
<td><p>Puts into pipeline buffer a redis ordered set by its key name and start end scores.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#handlers.redis_fetch.pipe_time_interval_bulk_ohlc_data" title="handlers.redis_fetch.pipe_time_interval_bulk_ohlc_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pipe_time_interval_bulk_ohlc_data</span></code></a>(pipeline, ...)</p></td>
<td><p>Pipes to redis, check time integrity and parse in a list of tuples with stream and open, high, low, close arrays.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.redis_client">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">redis_client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'127.0.0.1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decode_responses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#handlers.redis_fetch.redis_client" title="Link to this definition">¶</a></dt>
<dd><p>A redis consumer client creator for the Redis module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> (<em>str</em>) – Redis host ip. Default is localhost.</p></li>
<li><p><strong>port</strong> (<em>int</em>) – Default is 6379</p></li>
<li><p><strong>db</strong> (<em>int</em>) – Default is 0.</p></li>
<li><p><strong>decode_responses</strong> (<em>bool</em>) – It decodes responses from redis, avoiding bytes objects to be returned. Default is True.</p></li>
<li><p><strong>kwargs</strong> – If passed, object is instantiated exclusively with kwargs, discarding any passed parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Return object<span class="colon">:</span></dt>
<dd class="field-even"><p>A redis client.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.manage_sentinel">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">manage_sentinel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sentinel_redis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Redis</span></span></span><a class="headerlink" href="#handlers.redis_fetch.manage_sentinel" title="Link to this definition">¶</a></dt>
<dd><p>Manage the Redis Sentinel configuration and return a StrictRedis instance.</p>
<p>This function takes a sentinel_redis parameter, which can be a dictionary or a boolean. If it is a dictionary, the function expects the keys ‘hosts’, ‘sentinel_service_name’, and ‘password’ (optional) to be present. If it is a boolean, the function imports the sentinel_data from the secret module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sentinel_redis</strong> (<em>Union</em><em>[</em><em>dict</em><em>, </em><em>bool</em><em>]</em>) – A dictionary containing the Redis Sentinel configuration or a boolean to use the secret module for configuration.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A StrictRedis instance configured with the provided Sentinel settings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>StrictRedis</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#handlers.exceptions.RedisConfigError" title="handlers.exceptions.RedisConfigError"><strong>RedisConfigError</strong></a> – If the sentinel_redis parameter is a dictionary and the ‘hosts’ key is not present.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.manage_redis">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">manage_redis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redis_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Redis</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Redis</span></span></span><a class="headerlink" href="#handlers.redis_fetch.manage_redis" title="Link to this definition">¶</a></dt>
<dd><p>Manage the Redis configuration and return a StrictRedis instance or None.</p>
<p>This function takes a redis_args parameter, which can be a dictionary, a boolean, or a StrictRedis object. If it is a dictionary, the function expects the Redis configuration keys to be present. If it is a boolean, the function imports the redis_conf from the secret module. If it is a StrictRedis object, the function returns the object as is.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>redis_args</strong> (<em>Union</em><em>[</em><em>bool</em><em>, </em><em>Dict</em><em>, </em><em>StrictRedis</em><em>]</em>) – A dictionary containing the Redis configuration, a boolean to use the passed configuration, or a StrictRedis object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A StrictRedis instance configured with the provided settings or None if no configuration is provided.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[StrictRedis, None]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#handlers.exceptions.RedisConfigError" title="handlers.exceptions.RedisConfigError"><strong>RedisConfigError</strong></a> – If there is a misconfiguration in the Redis settings or the ‘redis_conf’ key is not found in the secret.py module.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.redis_klines_parser">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">redis_klines_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_zone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Europe/madrid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span></span></span><a class="headerlink" href="#handlers.redis_fetch.redis_klines_parser" title="Link to this definition">¶</a></dt>
<dd><p>Parses redis klines list to a BinPan Dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json_list</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list with klines format data.</p></li>
<li><p><strong>symbol</strong> (<em>str</em>) – Symbol expected. Just for naming index.</p></li>
<li><p><strong>tick_interval</strong> (<em>str</em>) – Tick interval expected. Just for naming index.</p></li>
<li><p><strong>time_zone</strong> (<em>str</em>) – A time zone for converting the index. Example: ‘Europe/Madrid’</p></li>
<li><p><strong>time_index</strong> (<em>bool</em>) – If true, index are datetime format, else integer index.</p></li>
</ul>
</dd>
<dt class="field-even">Return pd.DataFrame<span class="colon">:</span></dt>
<dd class="field-even"><p>A BinPan dataframe.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.orderbook_value_to_dataframe">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">orderbook_value_to_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#handlers.redis_fetch.orderbook_value_to_dataframe" title="Link to this definition">¶</a></dt>
<dd><p>Build a Dataframe with redis data from orderbook_values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em>) – Orderbook, redis_raw_data.</p>
</dd>
<dt class="field-even">Return pd.DataFrame<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataframe sorted.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.redis_extract_orderbook_value_quantities">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">redis_extract_orderbook_value_quantities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#handlers.redis_fetch.redis_extract_orderbook_value_quantities" title="Link to this definition">¶</a></dt>
<dd><p>Prepares data for plotting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> – Redis raw data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ask_value_quantities, bid_value_quantities</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.fetch_keys">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">fetch_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_tick_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_quote</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#handlers.redis_fetch.fetch_keys" title="Link to this definition">¶</a></dt>
<dd><p>Fetch all keys in redis database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>StrictRedis</em>) – A redis connector.</p></li>
<li><p><strong>filter_tick_interval</strong> (<em>str</em>) – Optional. A binance klines tick interval to fetch all keys for that interval.</p></li>
<li><p><strong>filter_quote</strong> (<em>str</em>) – Filter symbols without a quote.</p></li>
</ul>
</dd>
<dt class="field-even">Return list<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns all keys for a tick interval if passed, else all existing keys in redis.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.klines_continuity">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">klines_continuity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">klines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#handlers.redis_fetch.klines_continuity" title="Link to this definition">¶</a></dt>
<dd><p>Check klines missing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>klines</strong> (<em>list</em>) – List of raw candles response in a list of strings, not json parsed yet.</p></li>
<li><p><strong>tick_interval</strong> (<em>str</em>) – Binance klines interval.</p></li>
</ul>
</dd>
<dt class="field-even">Return bool<span class="colon">:</span></dt>
<dd class="field-even"><p>If true, klines are continuous.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.klines_ohlc_to_numpy">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">klines_ohlc_to_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">klines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="headerlink" href="#handlers.redis_fetch.klines_ohlc_to_numpy" title="Link to this definition">¶</a></dt>
<dd><p>Extract open, high, low and close numpy arrays from raw klines (list of json strings).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>klines</strong> (<em>list</em>) – A list with json strings.</p>
</dd>
<dt class="field-even">Return tuple<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple with numpy arrays with data: open, high, low and close.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.redis_baliza">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">redis_baliza</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redis_client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_zone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Europe/madrid'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#handlers.redis_fetch.redis_baliza" title="Link to this definition">¶</a></dt>
<dd><p>Returns when Redis data available waiting until the next open timestamp appears.</p>
<p>Expected format for the redis data is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="s1">&#39;{&quot;t&quot;: 1657651320000, &quot;o&quot;: &quot;0.10100000&quot;, &quot;h&quot;: &quot;0.10100000&quot;, &quot;l&quot;: &quot;0.10100000&quot;, &quot;c&quot;: &quot;0.10100000&quot;, &quot;v&quot;: &quot;0.00000000&quot;,</span>
</span><span id="1-2">  <span class="s2">&quot;T&quot;</span><span class="p">:</span> <span class="mi">1657651379999</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;Q&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">}</span><span class="s1">&#39;</span>
</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redis_client</strong> (<em>StrictRedis</em>) – A redis client.</p></li>
<li><p><strong>symbol</strong> (<em>str</em>) – Symbol.</p></li>
<li><p><strong>tick_interval</strong> (<em>str</em>) – Binance tick interval.</p></li>
<li><p><strong>time_zone</strong> (<em>str</em>) – A time zone for messages.</p></li>
</ul>
</dd>
<dt class="field-even">Return int<span class="colon">:</span></dt>
<dd class="field-even"><p>Timestamp of the open waited for.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.decode_zset_data">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">decode_zset_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#handlers.redis_fetch.decode_zset_data" title="Link to this definition">¶</a></dt>
<dd><p>Checks type and if bytes type, convert to dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_list</strong> – Data from zset.</p>
</dd>
<dt class="field-even">Return list<span class="colon">:</span></dt>
<dd class="field-even"><p>Str type list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.push_to_ordered_set">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">push_to_ordered_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">XX</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NX</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">GT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">INCR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#handlers.redis_fetch.push_to_ordered_set" title="Link to this definition">¶</a></dt>
<dd><p>Pushes elements to the ordered set with a score as index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>StrictRedis</em>) – A redis client connector.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – The redis key name.</p></li>
<li><p><strong>mapping</strong> (<em>list</em>) – Data to push in the format {data: score}</p></li>
<li><p><strong>LT</strong> – Only update existing elements if the new score is less than the current score. This flag doesn’t prevent adding new elements.</p></li>
<li><p><strong>XX</strong> – Only update elements that already exist. Don’t add new elements.</p></li>
<li><p><strong>NX</strong> – Only add new elements. Don’t update already existing elements. This is the default only true value.</p></li>
<li><p><strong>GT</strong> – Only update existing elements if the new score is greater than the current score. This flag doesn’t prevent adding new
elements.</p></li>
<li><p><strong>CH</strong> – Modify the return value from the number of new elements added, to the total number of elements changed (CH is an abbreviation
of changed). Changed elements are new elements added and elements already existing for which the score was updated. So elements
specified in the command line having the same score as they had in the past are not counted. Note: normally the return value of ZADD
only counts the number of new elements added.</p></li>
<li><p><strong>INCR</strong> – When this option is specified ZADD acts like ZINCRBY. Only one score-element pair can be specified in this mode.
Note: The GT, LT and NX options are mutually exclusive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>redis feedback info.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.fetch_zset_range">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">fetch_zset_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_scores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#handlers.redis_fetch.fetch_zset_range" title="Link to this definition">¶</a></dt>
<dd><p>Fetch a redis ordered set by its key name and start end indexes. Optionally returns with redis index (scores) in a tuple each row
if with_Scores.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>StrictRedis</em>) – A redis connector.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Redis key name. Optional, symbol and tick interval can be used too.</p></li>
<li><p><strong>symbol</strong> (<em>str</em>) – A Binance valid Symbol.</p></li>
<li><p><strong>tick_interval</strong> (<em>str</em>) – A binance tick interval. Like 5m, 1h etc</p></li>
<li><p><strong>start_index</strong> (<em>int</em>) – Numeric index in redis key.</p></li>
<li><p><strong>end_index</strong> (<em>int</em>) – Numeric index in redis key.</p></li>
<li><p><strong>with_scores</strong> (<em>bool</em>) – Will return rows with its index in a tuple if true.</p></li>
</ul>
</dd>
<dt class="field-even">Return list<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of rows in the redis set or a list of tuples with rows and scores if with_scores true.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">import</span> <span class="nn">binpan</span>
</span><span id="1-2"><span class="kn">from</span> <span class="nn">handlers</span> <span class="kn">import</span> <span class="n">redis_fetch</span>
</span><span id="1-3"><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span>
</span><span id="1-4">
</span><span id="1-5"><span class="n">redis_client</span> <span class="o">=</span> <span class="n">binpan</span><span class="o">.</span><span class="n">redis_client</span><span class="p">(</span><span class="n">ip</span><span class="o">=</span><span class="s1">&#39;192.168.69.43&#39;</span><span class="p">)</span>
</span><span id="1-6">
</span><span id="1-7"><span class="n">keys</span> <span class="o">=</span> <span class="n">redis_fetch</span><span class="o">.</span><span class="n">fetch_keys</span><span class="p">(</span><span class="n">redisClient</span><span class="o">=</span><span class="n">redis_client</span><span class="p">)</span>
</span><span id="1-8"><span class="n">stream</span> <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
</span><span id="1-9">
</span><span id="1-10"><span class="nb">print</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</span><span id="1-11">
</span><span id="1-12"><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;galabusd@kline_5m&#39;</span>
</span><span id="1-13">
</span><span id="1-14"><span class="n">redis_fetch</span><span class="o">.</span><span class="n">fetch_zset_range</span><span class="p">(</span><span class="n">redisClient</span><span class="o">=</span><span class="n">redis_client</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span> <span class="n">start_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end_index</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><span id="1-15">
</span><span id="1-16"><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="s1">&#39;{&quot;t&quot;: 1658765700000, &quot;o&quot;: &quot;0.05011000&quot;, &quot;h&quot;: &quot;0.05017000&quot;, &quot;l&quot;: &quot;0.05004000&quot;, &quot;c&quot;: &quot;0.05006000&quot;, &quot;v&quot;: &quot;345741.00000000&quot;, &quot;T&quot;: 1658765999999, &quot;q&quot;: &quot;17315.68030000&quot;, &quot;n&quot;: 87, &quot;V&quot;: &quot;84642.00000000&quot;, &quot;Q&quot;: &quot;4239.51131000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-17">     <span class="s1">&#39;{&quot;t&quot;: 1658766000000, &quot;o&quot;: &quot;0.05005000&quot;, &quot;h&quot;: &quot;0.05010000&quot;, &quot;l&quot;: &quot;0.04999000&quot;, &quot;c&quot;: &quot;0.04999000&quot;, &quot;v&quot;: &quot;448270.00000000&quot;, &quot;T&quot;: 1658766299999, &quot;q&quot;: &quot;22422.46695000&quot;, &quot;n&quot;: 68, &quot;V&quot;: &quot;132503.00000000&quot;, &quot;Q&quot;: &quot;6628.86299000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-18">     <span class="s1">&#39;{&quot;t&quot;: 1658766300000, &quot;o&quot;: &quot;0.04998000&quot;, &quot;h&quot;: &quot;0.05004000&quot;, &quot;l&quot;: &quot;0.04995000&quot;, &quot;c&quot;: &quot;0.05000000&quot;, &quot;v&quot;: &quot;268084.00000000&quot;, &quot;T&quot;: 1658766599999, &quot;q&quot;: &quot;13396.55626000&quot;, &quot;n&quot;: 57, &quot;V&quot;: &quot;94341.00000000&quot;, &quot;Q&quot;: &quot;4715.14561000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-19">     <span class="s1">&#39;{&quot;t&quot;: 1658766600000, &quot;o&quot;: &quot;0.04998000&quot;, &quot;h&quot;: &quot;0.05010000&quot;, &quot;l&quot;: &quot;0.04996000&quot;, &quot;c&quot;: &quot;0.05002000&quot;, &quot;v&quot;: &quot;402674.00000000&quot;, &quot;T&quot;: 1658766899999, &quot;q&quot;: &quot;20162.97689000&quot;, &quot;n&quot;: 68, &quot;V&quot;: &quot;154895.00000000&quot;, &quot;Q&quot;: &quot;7753.09416000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">]</span>
</span></pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.fetch_zset_timestamps">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">fetch_zset_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_scores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#handlers.redis_fetch.fetch_zset_timestamps" title="Link to this definition">¶</a></dt>
<dd><p>Fetch a redis ordered set by its key name and start end scores. Optionally with redis index (scores) in a tuple each row.
Optionally returns with redis index (scores) in a tuple each row if with_Scores.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>StrictRedis</em>) – A redis connector.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Redis key name.</p></li>
<li><p><strong>start_timestamp</strong> (<em>int</em>) – Usually a timestamp as index in redis key.</p></li>
<li><p><strong>end_timestamp</strong> (<em>int</em>) – Usually a timestamp as index in redis key.</p></li>
<li><p><strong>with_scores</strong> (<em>bool</em>) – Will return rows with its index in a tuple if true.</p></li>
</ul>
</dd>
<dt class="field-even">Return list<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of rows in the redis set or a list of tuples with rows and scores if with_scores true.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="kn">import</span> <span class="nn">binpan</span>
</span><span id="1-2"><span class="kn">from</span> <span class="nn">handlers</span> <span class="kn">import</span> <span class="n">redis_fetch</span>
</span><span id="1-3"><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span>
</span><span id="1-4">
</span><span id="1-5"><span class="n">redis_client</span> <span class="o">=</span> <span class="n">binpan</span><span class="o">.</span><span class="n">redis_client</span><span class="p">(</span><span class="n">ip</span><span class="o">=</span><span class="s1">&#39;192.168.69.43&#39;</span><span class="p">)</span>
</span><span id="1-6">
</span><span id="1-7"><span class="n">keys</span> <span class="o">=</span> <span class="n">redis_fetch</span><span class="o">.</span><span class="n">fetch_keys</span><span class="p">(</span><span class="n">redisClient</span><span class="o">=</span><span class="n">redis_client</span><span class="p">)</span>
</span><span id="1-8"><span class="n">stream</span> <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
</span><span id="1-9">
</span><span id="1-10"><span class="nb">print</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</span><span id="1-11">
</span><span id="1-12"><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;galabusd@kline_5m&#39;</span>
</span><span id="1-13">
</span><span id="1-14"><span class="n">redis_fetch</span><span class="o">.</span><span class="n">fetch_zset_timestamps</span><span class="p">(</span><span class="n">redisClient</span><span class="o">=</span><span class="n">redis_client</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span> <span class="n">start_timestamp</span><span class="o">=</span><span class="mi">1658765700000</span><span class="p">,</span> <span class="n">end_timestamp</span><span class="o">=</span> <span class="mi">1658766600000</span><span class="p">,</span> <span class="n">with_scores</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="1-15">
</span><span id="1-16"><span class="o">&gt;&gt;&gt;</span> <span class="p">[(</span><span class="s1">&#39;{&quot;t&quot;: 1658765700000, &quot;o&quot;: &quot;0.05011000&quot;, &quot;h&quot;: &quot;0.05017000&quot;, &quot;l&quot;: &quot;0.05004000&quot;, &quot;c&quot;: &quot;0.05006000&quot;, &quot;v&quot;: &quot;345741.00000000&quot;, &quot;T&quot;: 1658765999999, &quot;q&quot;: &quot;17315.68030000&quot;, &quot;n&quot;: 87, &quot;V&quot;: &quot;84642.00000000&quot;, &quot;Q&quot;: &quot;4239.51131000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-17">      <span class="mf">1658765700000.0</span><span class="p">),</span>
</span><span id="1-18">     <span class="p">(</span><span class="s1">&#39;{&quot;t&quot;: 1658766000000, &quot;o&quot;: &quot;0.05005000&quot;, &quot;h&quot;: &quot;0.05010000&quot;, &quot;l&quot;: &quot;0.04999000&quot;, &quot;c&quot;: &quot;0.04999000&quot;, &quot;v&quot;: &quot;448270.00000000&quot;, &quot;T&quot;: 1658766299999, &quot;q&quot;: &quot;22422.46695000&quot;, &quot;n&quot;: 68, &quot;V&quot;: &quot;132503.00000000&quot;, &quot;Q&quot;: &quot;6628.86299000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-19">      <span class="mf">1658766000000.0</span><span class="p">),</span>
</span><span id="1-20">     <span class="p">(</span><span class="s1">&#39;{&quot;t&quot;: 1658766300000, &quot;o&quot;: &quot;0.04998000&quot;, &quot;h&quot;: &quot;0.05004000&quot;, &quot;l&quot;: &quot;0.04995000&quot;, &quot;c&quot;: &quot;0.05000000&quot;, &quot;v&quot;: &quot;268084.00000000&quot;, &quot;T&quot;: 1658766599999, &quot;q&quot;: &quot;13396.55626000&quot;, &quot;n&quot;: 57, &quot;V&quot;: &quot;94341.00000000&quot;, &quot;Q&quot;: &quot;4715.14561000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-21">      <span class="mf">1658766300000.0</span><span class="p">),</span>
</span><span id="1-22">     <span class="p">(</span><span class="s1">&#39;{&quot;t&quot;: 1658766600000, &quot;o&quot;: &quot;0.04998000&quot;, &quot;h&quot;: &quot;0.05010000&quot;, &quot;l&quot;: &quot;0.04996000&quot;, &quot;c&quot;: &quot;0.05002000&quot;, &quot;v&quot;: &quot;402674.00000000&quot;, &quot;T&quot;: 1658766899999, &quot;q&quot;: &quot;20162.97689000&quot;, &quot;n&quot;: 68, &quot;V&quot;: &quot;154895.00000000&quot;, &quot;Q&quot;: &quot;7753.09416000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-23">      <span class="mf">1658766600000.0</span><span class="p">)]</span>
</span><span id="1-24">
</span><span id="1-25"><span class="c1"># Now without scores</span>
</span><span id="1-26">
</span><span id="1-27"><span class="n">redis_fetch</span><span class="o">.</span><span class="n">fetch_zset_timestamps</span><span class="p">(</span><span class="n">redisClient</span><span class="o">=</span><span class="n">redis_client</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span> <span class="n">start_timestamp</span><span class="o">=</span><span class="mi">1658765700000</span><span class="p">,</span> <span class="n">end_timestamp</span><span class="o">=</span> <span class="mi">1658766600000</span><span class="p">,</span> <span class="n">with_scores</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="1-28">
</span><span id="1-29"><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="s1">&#39;{&quot;t&quot;: 1658765700000, &quot;o&quot;: &quot;0.05011000&quot;, &quot;h&quot;: &quot;0.05017000&quot;, &quot;l&quot;: &quot;0.05004000&quot;, &quot;c&quot;: &quot;0.05006000&quot;, &quot;v&quot;: &quot;345741.00000000&quot;, &quot;T&quot;: 1658765999999, &quot;q&quot;: &quot;17315.68030000&quot;, &quot;n&quot;: 87, &quot;V&quot;: &quot;84642.00000000&quot;, &quot;Q&quot;: &quot;4239.51131000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-30">    <span class="s1">&#39;{&quot;t&quot;: 1658766000000, &quot;o&quot;: &quot;0.05005000&quot;, &quot;h&quot;: &quot;0.05010000&quot;, &quot;l&quot;: &quot;0.04999000&quot;, &quot;c&quot;: &quot;0.04999000&quot;, &quot;v&quot;: &quot;448270.00000000&quot;, &quot;T&quot;: 1658766299999, &quot;q&quot;: &quot;22422.46695000&quot;, &quot;n&quot;: 68, &quot;V&quot;: &quot;132503.00000000&quot;, &quot;Q&quot;: &quot;6628.86299000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-31">    <span class="s1">&#39;{&quot;t&quot;: 1658766300000, &quot;o&quot;: &quot;0.04998000&quot;, &quot;h&quot;: &quot;0.05004000&quot;, &quot;l&quot;: &quot;0.04995000&quot;, &quot;c&quot;: &quot;0.05000000&quot;, &quot;v&quot;: &quot;268084.00000000&quot;, &quot;T&quot;: 1658766599999, &quot;q&quot;: &quot;13396.55626000&quot;, &quot;n&quot;: 57, &quot;V&quot;: &quot;94341.00000000&quot;, &quot;Q&quot;: &quot;4715.14561000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">,</span>
</span><span id="1-32">    <span class="s1">&#39;{&quot;t&quot;: 1658766600000, &quot;o&quot;: &quot;0.04998000&quot;, &quot;h&quot;: &quot;0.05010000&quot;, &quot;l&quot;: &quot;0.04996000&quot;, &quot;c&quot;: &quot;0.05002000&quot;, &quot;v&quot;: &quot;402674.00000000&quot;, &quot;T&quot;: 1658766899999, &quot;q&quot;: &quot;20162.97689000&quot;, &quot;n&quot;: 68, &quot;V&quot;: &quot;154895.00000000&quot;, &quot;Q&quot;: &quot;7753.09416000&quot;, &quot;B&quot;: &quot;0&quot;}&#39;</span><span class="p">]</span>
</span></pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.fetch_set_and_parse">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">fetch_set_and_parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span></span></span><a class="headerlink" href="#handlers.redis_fetch.fetch_set_and_parse" title="Link to this definition">¶</a></dt>
<dd><p>Fetch a websocket channel from redis and parses to a BinPan dataframe.</p>
<p>Data is expected to be in a redis ordered set with klines data each row and with Open timestamp as score.
Example of data in one score of the zset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="s1">&#39;{&quot;t&quot;: 1657651320000, &quot;o&quot;: &quot;0.10100000&quot;, &quot;h&quot;: &quot;0.10100000&quot;, &quot;l&quot;: &quot;0.10100000&quot;, &quot;c&quot;: &quot;0.10100000&quot;, &quot;v&quot;: &quot;0.00000000&quot;,</span>
</span><span id="1-2">  <span class="s2">&quot;T&quot;</span><span class="p">:</span> <span class="mi">1657651379999</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;Q&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">}</span><span class="s1">&#39;</span>
</span><span id="1-3">
</span><span id="1-4"><span class="c1"># score for this entry would be Open timestamp: 1657651320000</span>
</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>StrictRedis</em>) – A redis connector.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Key redis name.</p></li>
</ul>
</dd>
<dt class="field-even">Return pd.DataFrame<span class="colon">:</span></dt>
<dd class="field-even"><p>BinPan dataframe.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.zset_length_between_scores">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">zset_length_between_scores</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#handlers.redis_fetch.zset_length_between_scores" title="Link to this definition">¶</a></dt>
<dd><p>Returns count of elements between start score and end score (including elements with score equal to min or max).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>StrictRedis</em>) – A redis client.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – A redis available key (zset name).</p></li>
<li><p><strong>min_index</strong> – A score presumed value.</p></li>
<li><p><strong>max_index</strong> – A score presumed value.</p></li>
</ul>
</dd>
<dt class="field-even">Return int<span class="colon">:</span></dt>
<dd class="field-even"><p>Count of scores in redis between ()</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.zset_length">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">zset_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#handlers.redis_fetch.zset_length" title="Link to this definition">¶</a></dt>
<dd><p>Returns count of elements in a set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>StrictRedis</em>) – A redis client.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – A redis available key (zset name).</p></li>
</ul>
</dd>
<dt class="field-even">Return int<span class="colon">:</span></dt>
<dd class="field-even"><p>Count elements in zset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.push_line_to_redis">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">push_line_to_redis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#handlers.redis_fetch.push_line_to_redis" title="Link to this definition">¶</a></dt>
<dd><p>Pushes another line to the end of a list key in redis database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>StrictRedis</em>) – A redis connector.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – The redis key name.</p></li>
<li><p><strong>data</strong> (<em>str</em>) – Data to push. If not string type will be converted to string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>redis feedback info.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.fetch_list">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">fetch_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#handlers.redis_fetch.fetch_list" title="Link to this definition">¶</a></dt>
<dd><p>Fetch list entries in a redis list key from start index to end.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>object</em>) – A redis connector.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Key name in redis database.</p></li>
<li><p><strong>start_index</strong> (<em>int</em>) – First index to fetch.</p></li>
<li><p><strong>end_index</strong> (<em>int</em>) – Last index to fetch.</p></li>
</ul>
</dd>
<dt class="field-even">Return list<span class="colon">:</span></dt>
<dd class="field-even"><p>All raw strings in redis list key into a python’s list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.fetch_data_in_list">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">fetch_data_in_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#handlers.redis_fetch.fetch_data_in_list" title="Link to this definition">¶</a></dt>
<dd><p>Fetch data from redis for a given key. Data expected format is redis list.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="s1">&#39;{&quot;t&quot;: 1657651320000, &quot;o&quot;: &quot;0.10100000&quot;, &quot;h&quot;: &quot;0.10100000&quot;, &quot;l&quot;: &quot;0.10100000&quot;, &quot;c&quot;: &quot;0.10100000&quot;, &quot;v&quot;: &quot;0.00000000&quot;,</span>
</span><span id="1-2">  <span class="s2">&quot;T&quot;</span><span class="p">:</span> <span class="mi">1657651379999</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;Q&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">}</span><span class="s1">&#39;</span>
</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>object</em>) – A redis connector.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – An existing redis key.</p></li>
<li><p><strong>start_index</strong> (<em>int</em>) – first index in the redis key to fetch for.</p></li>
<li><p><strong>end_index</strong> (<em>int</em>) – last index in the redis key to fetch for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.insert_line_before_index_in_list">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">insert_line_before_index_in_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#handlers.redis_fetch.insert_line_before_index_in_list" title="Link to this definition">¶</a></dt>
<dd><p>Inserts data before an existing string in a redis list. You need to know the index of the reference value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>object</em>) – A redis connector.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – A redis key list formatted.</p></li>
<li><p><strong>idx</strong> (<em>int</em>) – Index where will be inserted the value, pushing forward existing values, in other words,
inserting before the referred value in that passed index.</p></li>
<li><p><strong>value</strong> (<em>str</em>) – An string to insert.</p></li>
</ul>
</dd>
<dt class="field-even">Return None<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.find_row_index_in_redis_key">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">find_row_index_in_redis_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_reference</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#handlers.redis_fetch.find_row_index_in_redis_key" title="Link to this definition">¶</a></dt>
<dd><p>It founds in a redis stream the most accurate row with greater timestamp than the passed timestamp row and returns its
index by iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>object</em>) – A redis connector.</p></li>
<li><p><strong>symbol</strong> (<em>str</em>) – A binance symbol.</p></li>
<li><p><strong>tick_interval</strong> (<em>str</em>) – A binance klines tick interval.</p></li>
<li><p><strong>row_reference</strong> (<em>str</em>) – A json.dumps() of a row from binance klines.</p></li>
</ul>
</dd>
<dt class="field-even">Return int<span class="colon">:</span></dt>
<dd class="field-even"><p>Index position of the next existing row.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.fetch_list_filter_query">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">fetch_list_filter_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">redisClient</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coin_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symbol_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick_interval_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#handlers.redis_fetch.fetch_list_filter_query" title="Link to this definition">¶</a></dt>
<dd><p>Fetch from redis all keys for a time interval. Then filters by symbol or coin in the ticker fetched.</p>
<p>Is expected to fetch redis list data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span id="1-1"><span class="s1">&#39;{&quot;t&quot;: 1657651320000, &quot;o&quot;: &quot;0.10100000&quot;, &quot;h&quot;: &quot;0.10100000&quot;, &quot;l&quot;: &quot;0.10100000&quot;, &quot;c&quot;: &quot;0.10100000&quot;, &quot;v&quot;: &quot;0.00000000&quot;,</span>
</span><span id="1-2">  <span class="s2">&quot;T&quot;</span><span class="p">:</span> <span class="mi">1657651379999</span><span class="p">,</span> <span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;Q&quot;</span><span class="p">:</span> <span class="s2">&quot;0.00000000&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">}</span><span class="s1">&#39;</span>
</span></pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>redisClient</strong> (<em>object</em>) – Connector for redis.</p></li>
<li><p><strong>coin_filter</strong> (<em>str</em>) – A coin string to filter out all redis keys without it.</p></li>
<li><p><strong>symbol_filter</strong> (<em>str</em>) – Optional. A symbol string to filter out all redis keys without it. Symbol filter prevales over coin filter.</p></li>
<li><p><strong>tick_interval_filter</strong> (<em>str</em>) – Binance klines tick interval.</p></li>
<li><p><strong>start_index</strong> (<em>int</em>) – first index in the redis key to fetch for.</p></li>
<li><p><strong>end_index</strong> (<em>int</em>) – last index in the redis key to fetch for.</p></li>
</ul>
</dd>
<dt class="field-even">Return dict<span class="colon">:</span></dt>
<dd class="field-even"><p>A dict each symbol with its data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.execute_pipeline">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">execute_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pipeline</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#handlers.redis_fetch.execute_pipeline" title="Link to this definition">¶</a></dt>
<dd><p>Executes a pipeline buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pipeline</strong> (<em>redisClient</em>) – A redis client pipeline.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Redis response.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.flush_pipeline">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">flush_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pipeline</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pipeline</span></span></span><a class="headerlink" href="#handlers.redis_fetch.flush_pipeline" title="Link to this definition">¶</a></dt>
<dd><p>Flush pipeline buffered commands.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pipeline</strong> (<em>redisClient</em>) – A redis client pipeline.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Redis response.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.pipe_buffer_ordered_set">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">pipe_buffer_ordered_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Redis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">XX</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NX</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">GT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">CH</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">INCR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#handlers.redis_fetch.pipe_buffer_ordered_set" title="Link to this definition">¶</a></dt>
<dd><p>Fills a pipeline buffer to “pipeline.execute()” later with commands of pushes of elements to an ordered set with a score as index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<em>redisClient</em>) – A redis client pipeline.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – The redis key name.</p></li>
<li><p><strong>mapping</strong> (<em>list</em>) – Data to push in the format {data: score}</p></li>
<li><p><strong>LT</strong> – Only update existing elements if the new score is less than the current score. This flag doesn’t prevent adding new elements.</p></li>
<li><p><strong>XX</strong> – Only update elements that already exist. Don’t add new elements.</p></li>
<li><p><strong>NX</strong> – Only add new elements. Don’t update already existing elements. This is the default only true value.</p></li>
<li><p><strong>GT</strong> – Only update existing elements if the new score is greater than the current score. This flag doesn’t prevent adding new
elements.</p></li>
<li><p><strong>CH</strong> – Modify the return value from the number of new elements added, to the total number of elements changed (CH is an abbreviation
of changed). Changed elements are new elements added and elements already existing for which the score was updated. So elements
specified in the command line having the same score as they had in the past are not counted. Note: normally the return value of ZADD
only counts the number of new elements added.</p></li>
<li><p><strong>INCR</strong> – When this option is specified ZADD acts like ZINCRBY. Only one score-element pair can be specified in this mode.
Note: The GT, LT and NX options are mutually exclusive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>redis feedback info.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.pipe_zset_range">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">pipe_zset_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_scores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pipeline</span></span></span><a class="headerlink" href="#handlers.redis_fetch.pipe_zset_range" title="Link to this definition">¶</a></dt>
<dd><p>Pipe a request for an ordered set by index for a redis existing key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<em>StrictRedis.pipeline</em>) – Pipeline object.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Key to pipe wanted data.</p></li>
<li><p><strong>start_index</strong> (<em>int</em>) – Starting index of data. If ordered by scoring timestamps, starting values are older than ending values.
Default 0</p></li>
<li><p><strong>end_index</strong> (<em>int</em>) – Ending index of data. If ordered by scoring timestamps, starting values are older than ending values.
Default -1</p></li>
<li><p><strong>with_scores</strong> (<em>bool</em>) – Pipes for a list of tuples with data and score.</p></li>
</ul>
</dd>
<dt class="field-even">Return StrictRedis.pipeline<span class="colon">:</span></dt>
<dd class="field-even"><p>Pipeline object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.pipe_zset_timestamps">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">pipe_zset_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_scores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pipeline</span></span></span><a class="headerlink" href="#handlers.redis_fetch.pipe_zset_timestamps" title="Link to this definition">¶</a></dt>
<dd><p>Puts into pipeline buffer a redis ordered set by its key name and start end scores. Optionally with redis index (scores)
in a tuple each row. Optionally returns with redis index (scores) in a tuple each row if with_Scores.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<em>StrictRedis.pipeline</em>) – A redis pipeline.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Redis key name.</p></li>
<li><p><strong>start_timestamp</strong> (<em>int</em>) – Usually a timestamp as index in redis key.</p></li>
<li><p><strong>end_timestamp</strong> (<em>int</em>) – Usually a timestamp as index in redis key.</p></li>
<li><p><strong>with_scores</strong> (<em>bool</em>) – Will return rows with its index in a tuple if true.</p></li>
</ul>
</dd>
<dt class="field-even">Return StrictRedis.pipeline<span class="colon">:</span></dt>
<dd class="field-even"><p>A pipeline ready to execute.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="handlers.redis_fetch.pipe_time_interval_bulk_ohlc_data">
<span class="sig-prename descclassname"><span class="pre">handlers.redis_fetch.</span></span><span class="sig-name descname"><span class="pre">pipe_time_interval_bulk_ohlc_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipeline</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">my_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">202</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#handlers.redis_fetch.pipe_time_interval_bulk_ohlc_data" title="Link to this definition">¶</a></dt>
<dd><p>Pipes to redis, check time integrity and parse in a list of tuples with stream and open, high, low, close arrays.</p>
</dd></dl>

</section>
</section>

        </article>
        
        <div class="navigation flex print:hidden">
  <div class="navigation-prev">
    <a href="quest.html">
      <i class="i-icon chevron"></i>
      <div class="page-info">
        <span>Previous</span>
        
        <div class="title">Requests Module</div>
        
      </div>
    </a>
  </div>
  <div class="navigation-next">
    <a href="stat_tests.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">Statistical Tests and Tools</div>
      </div>
      <i class="i-icon chevron"></i>
    </a>
  </div>
</div>
        
      </div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2022, Fernando Alfonso</p>
        
        <p>
          Made with
          
          <a href="https://www.sphinx-doc.org/">Sphinx</a> and
          
          <a href="https://shibuya.lepture.com">Shibuya theme</a>.
        </p>
      </div>
      <div class="sy-foot-socials">
      </div>
    </div>
  </div>
</footer></div>
      <script src="_static/documentation_options.js?v=b9afe91b"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/shibuya.js?v=3e5c8598"></script>
    
</body>
</html>